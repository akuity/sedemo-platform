apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
helmCharts:
  - name: kubernetes-dashboard
    repo: https://wenerme.github.io/charts
    includeCRDs: true
    valuesFile: values.yaml
    version: 7.14.0
    releaseName: prod
    namespace: kd-prod
patches:
  # Sync wave 1: API component deploys first
  - path: wave-1.yaml
    target:
      kind: Deployment
      name: prod-kubernetes-dashboard-api
  # Sync wave 2: Web UI deploys after API
  - path: wave-2.yaml
    target:
      kind: Deployment
      name: prod-kubernetes-dashboard-web
  # Sync wave 3: Kong gateway deploys last
  - path: wave-3.yaml
    target:
      kind: Deployment
      name: prod-kong
